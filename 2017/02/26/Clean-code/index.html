<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 代码整洁之道 · Hexo</title><meta name="description" content="代码整洁之道 - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/avatar.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Hexo"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/avatar.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/3290954642" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/boolchow" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">代码整洁之道</h1><div class="post-info">Feb 26, 2017</div><div class="post-content"><a id="more"></a>
<p>代码的整洁与否是一个程序员的个人卫生问题。一个程序员穿着可以稍邋遢一些，但是代码要写的干净、利落。<br>如果你想成为一个更好的程序员，除了要学习语法、设计模式之外，还要学习如何写出整洁有效的代码，这本书会教你如何写出这样的代码。书中代码全部为 Java 语言，如果没有接触过 Java 语言，读起来可能会有点困难。</p>
<p>这本书大致可以分为三个部分：第一部分占据了大约一半的章节，主要介绍编写整洁代码的原则、模式和实践，读起来比较容易理解。如果你读完这部分感觉已经掌握了如何写好整洁代码，那么你要失望了，其实你只学到一点皮毛。要知道，<strong>容易学会的东西一般价值都不高</strong>。当然如果你是天才，学什么都快，就当我没说。</p>
<p>第二部分主要是对几个复杂性不断增加的案例的研究，这是最有价值的一部分，也是最难读的一部分。在这部分你会读大量的 Java 代码，然后逐渐掌握如何写出整洁有效的代码。</p>
<p>第三部分是从研究案例得到的一些启示与灵感。如果你仔细读了第二部分，这部分将是对你的回报，否则这部分对你来说可能所值无几。</p>
<p>这本书是基于 Java 语言写的，因为语法的差异性，有些规则并不适合 OC。下面我主要针对 OC 总结的一些 Tips。</p>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><p>命名是令程序员最头疼的事之一，良好的命名习惯是写好整洁代码的基本素养，命名遵循的原则就是：<strong>有意义且不误导读者</strong>。在 Apple 的官方文档 <a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html" target="_blank" rel="noopener">Coding Guidelines for Cocoa</a> 中，有规范的命名规则。作为一名 iOS 开发者，有必要读一下这篇文档。如果说 Apple 官方文档是针对 OC 的定制规则，那么下面说的将是一些通用规则。</p>
<h4 id="1-有意义的命名"><a href="#1-有意义的命名" class="headerlink" title="1.有意义的命名"></a>1.有意义的命名</h4><p>只有编程初学者才会用 <code>a</code>,<code>b</code>,<code>sss</code>,<code>tyq</code> 去做变量或常量名，这点相信大家都不会了。在命名的时候，想要表达什么，就去用什么样的名字。在 OC 的编码习惯中，基本都是用完整的单词，尽量<strong>不要用缩写</strong>，多个单词采用”驼峰标记法”。如果你深受 Windows 的 C 语言 API 毒害的话，赶快忘掉那该死的”匈牙利标记法”吧。例如下面的代码中：<br><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/APIAbbreviations.html#//apple_ref/doc/uid/20001285-BCIHCGAE" target="_blank" rel="noopener"></a></p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UILabel</span> *nameLbl = [<span class="built_in">UILabel</span> new];  <span class="comment">// nameLbl 中不应把 'Label' 缩写</span></span><br><span class="line"><span class="built_in">NSString</span> *logStr = <span class="string">@"this is log"</span>;  <span class="comment">// 即使是 NSString 类型，也不应该缩写为 Str</span></span><br><span class="line"><span class="built_in">UIViewController</span> *loginVC = [<span class="built_in">UIViewController</span> new];  <span class="comment">// 不建议把 ViewController 所以为 VC</span></span><br></pre></td></tr></table></figure>
<p><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/APIAbbreviations.html#//apple_ref/doc/uid/20001285-BCIHCGAE" target="_blank" rel="noopener">Apple 官方指定的一些缩写</a>，在命名时这些变量可以使用缩写。</p>
<p>尽量避免使用一些无意义的”魔法数字”，可以使用枚举、常量、宏或者其他方式代替，在进行全局搜索时也很方便。例如下面例子：</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1,2,3 各代表什么？</span></span><br><span class="line"><span class="keyword">if</span> (state == <span class="number">1</span>) &#123;...&#125;</span><br><span class="line"><span class="keyword">if</span> (state == <span class="number">2</span>) &#123;...&#125;</span><br><span class="line"><span class="keyword">if</span> (state == <span class="number">3</span>) &#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果写成这样，则很明确</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSUInteger</span>, VideoState) &#123;</span><br><span class="line">	VideoStateOpen = <span class="number">1</span>,</span><br><span class="line">	VideoStatePause,</span><br><span class="line">	VideoStateClose</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (state == VideoStateOpen) &#123;...&#125;</span><br><span class="line"><span class="keyword">if</span> (state == VideoStatePause) &#123;...&#125;</span><br><span class="line"><span class="keyword">if</span> (state == VideoStateClose) &#123;...&#125;  <span class="comment">// 换成 switch 或许更好一些</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 还有这种的，40.0f 和 23.0f 是什么鬼？为什么不定义为有名字的常量？</span></span><br><span class="line"><span class="built_in">CGFloat</span> viewHeight = <span class="number">40.0</span>f + <span class="number">23.0</span>f;</span><br></pre></td></tr></table></figure>
<h4 id="2-避免误导"><a href="#2-避免误导" class="headerlink" title="2.避免误导"></a>2.避免误导</h4><p>有意义的命名是先决条件，在有意义的基础上，还要做到不能误导读者。不要使用关键字或者一些专属名词命名；不要使用双关语；不要单个使用 ‘o’、’l’ 这种字母，以免与 ‘0’ 、 ‘1’ 混淆读者。下面示例引以为戒：</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// list 在很多语言中是一种容器类型，尽量不要作为变量名</span></span><br><span class="line"><span class="built_in">NSArray</span> *list = [<span class="built_in">NSArray</span> new];   </span><br><span class="line"></span><br><span class="line"><span class="comment">// o or 0,1 or l 很容易混淆,尽管现在的 IDE 会对数字和字母有高亮区分,还是不建议这样写</span></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>；</span><br><span class="line"><span class="keyword">if</span> (O == <span class="number">1</span>) &#123;</span><br><span class="line">	a = O1;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	l = <span class="number">01</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure>
<h4 id="OC-中变量、属性、方法、类的命名"><a href="#OC-中变量、属性、方法、类的命名" class="headerlink" title="OC 中变量、属性、方法、类的命名"></a>OC 中变量、属性、方法、类的命名</h4><p>在进行团队合作时，通常团队内部会统一一套编码风格，否则在定义”个人信息”时有的用 ‘personData’，有的用 ‘personInfo’ 岂不是乱套了。在没有统一的时候，应按照如下规则。</p>
<p>在对基本类型的变量或属性进行命名时，遵循有意义且不误导原则；在对对象类型的变量或属性进行命名时，经常在名字后面加上对象类型。不要觉得长，OC 的语法命名一向都很长，看 API 就知道了。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本类型命名</span></span><br><span class="line"><span class="built_in">CGRect</span> avatarViewFrame = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">40</span>,<span class="number">40</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象类型命名,多以 '名称+类型后缀'</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UILabel</span> *titleLabel;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *tagView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>)	<span class="built_in">NSDictionary</span> *namesArray;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也有一些特例,例如 NSString 类型有时候就不带后缀</span></span><br><span class="line">@Property (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *name;</span><br></pre></td></tr></table></figure>
<p>方法命名，要遵循一下几条原则：</p>
<ul>
<li>以小写字母开始，之后单词的首字母大写，即”驼峰标识”。</li>
<li>如果方法代表对象接收的动作，以动词开始。尽量不要使用 ‘get’、’set’ 命名，set 方法可以使用 ‘set’ 开头命名。</li>
<li>如果方法返回接收者的属性，以 接收者 + 接收的属性 命名。</li>
<li>参数名以小写字母开始，之后的单词首字母大写，不要使用缩写。</li>
</ul>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动词开头</span></span><br><span class="line">- (<span class="keyword">void</span>)pushToLoginViewController;</span><br><span class="line">- (<span class="keyword">void</span>)downloadImageWithURLString:(<span class="built_in">NSString</span> *)imageURL;</span><br><span class="line">- (<span class="built_in">CGSize</span>)logoViewSize;  <span class="comment">// 接受者 + 属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// set 方法</span></span><br><span class="line">- (<span class="keyword">void</span>)setUserName:(<span class="built_in">NSString</span> *)userName;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一些反例</span></span><br><span class="line">— (<span class="built_in">NSInteger</span>)getNumber;</span><br><span class="line">- (<span class="keyword">void</span>)showimage;</span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithRequest:(<span class="built_in">NSURLRequest</span> *) req;</span><br></pre></td></tr></table></figure>
<p>类命名，一般在开发项目时，会规定类得前缀。因为 Apple 的 API 前缀一般为两个大写字母，为了避免冲突，自定义类名一般前缀为三个大写字母。例如：</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 所有前缀为 BLC(BoolChow) 缩写</span></span><br><span class="line">BLCLoginViewController.h</span><br><span class="line">BLCLoginViewController.m</span><br><span class="line"></span><br><span class="line">BLCNetWork.h</span><br><span class="line">BLCNetWork.m</span><br></pre></td></tr></table></figure>
<p>在 Xcode 中，选中项目在右侧工具栏中可以设置类的前缀，这样在新建类时会默认加上前缀。如下图：</p>
<p><img src="/uploads/Clean-Code/prefixSet.png" alt="设置前缀"></p>
<p><img src="/uploads/Clean-Code/prefixEg.png" alt="设置前缀示例"></p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>好的代码是不用注释的，好的注释是你想办法不去写注释，听着有点废话，但确实如此。之因为写注释，是因为代码写的比较乱，怕其他人看不懂，因为标上清晰的注释就能掩盖代码的丑陋。但是往往注释写太多，代码显得就 low 了。</p>
<p>OC 的命名一般都使用单词全拼，很少使用缩写。有时候一个方法的名字特别长，读起来像一句话。所以在 OC 中，如果名字起得好，很少用的到注释。当然，在一些开源框架、SDK 或者官方 API 中，头文件中很多方法都会标有大量注释，方便使用者理解，这并不矛盾。为了注释到恰到好处，下面从”什么时候写”，”怎么写”，”在哪写”三个方面简述几条注释的规则。</p>
<h4 id="1-当代码表述不清，或者容易误导读者的时候，加以注释。"><a href="#1-当代码表述不清，或者容易误导读者的时候，加以注释。" class="headerlink" title="1.当代码表述不清，或者容易误导读者的时候，加以注释。"></a>1.当代码表述不清，或者容易误导读者的时候，加以注释。</h4><p>最好情况下是将代码表述清楚，但是有时候想要表述的内容太多，代码无法表述，这时候要加上注释进行辅助表述。例如 <code>ViewController</code> 的生命周期方法：<br><figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 想要表述的内容太多，以至于方法名字不能表述出来。</span></span><br><span class="line">- (<span class="keyword">void</span>)loadView; <span class="comment">// This is where subclasses should create their custom view hierarchy if they aren't using a nib. Should never be called directly.</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad; <span class="comment">// Called after the view has been loaded. For view controllers created in code, this is after -loadView. For view controllers unarchived from a nib, this is after the view is set.</span></span><br></pre></td></tr></table></figure></p>
<p>有时候代码表述的有歧义，可能会误导读者，这时候要加上注释进行辅助表述。而且尽量不要写误导性代码。</p>
<p>在写 SDK 或者其他开源框架时，需要在头文件中添加注释，表述每个方法的作用。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Mantle 中，MTLJsonAdapter.h 中对每个方法都做了详细的注释，方便使用者理解</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MTLJSONAdapter</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/// Attempts to parse a JSON dictionary into a model object.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// modelClass     - The MTLModel subclass to attempt to parse from the JSON.</span></span><br><span class="line"><span class="comment">///                  This class must conform to &lt;MTLJSONSerializing&gt;. This</span></span><br><span class="line"><span class="comment">///                  argument must not be nil.</span></span><br><span class="line"><span class="comment">/// JSONDictionary - A dictionary representing JSON data. This should match the</span></span><br><span class="line"><span class="comment">///                  format returned by NSJSONSerialization. If this argument is</span></span><br><span class="line"><span class="comment">///                  nil, the method returns nil.</span></span><br><span class="line"><span class="comment">/// error          - If not NULL, this may be set to an error that occurs during</span></span><br><span class="line"><span class="comment">///                  parsing or initializing an instance of `modelClass`.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Returns an instance of `modelClass` upon success, or nil if a parsing error</span></span><br><span class="line"><span class="comment">/// occurred.</span></span><br><span class="line">+ (<span class="keyword">id</span>)modelOfClass:(Class)modelClass fromJSONDictionary:(<span class="built_in">NSDictionary</span> *)JSONDictionary error:(<span class="built_in">NSError</span> **)error;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Attempts to parse an array of JSON dictionary objects into a model objects</span></span><br><span class="line"><span class="comment">/// of a specific class.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// modelClass - The MTLModel subclass to attempt to parse from the JSON. This</span></span><br><span class="line"><span class="comment">///              class must conform to &lt;MTLJSONSerializing&gt;. This argument must</span></span><br><span class="line"><span class="comment">///              not be nil.</span></span><br><span class="line"><span class="comment">/// JSONArray  - A array of dictionaries representing JSON data. This should</span></span><br><span class="line"><span class="comment">///              match the format returned by NSJSONSerialization. If this</span></span><br><span class="line"><span class="comment">///              argument is nil, the method returns nil.</span></span><br><span class="line"><span class="comment">/// error      - If not NULL, this may be set to an error that occurs during</span></span><br><span class="line"><span class="comment">///              parsing or initializing an any of the instances of</span></span><br><span class="line"><span class="comment">///              `modelClass`.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Returns an array of `modelClass` instances upon success, or nil if a parsing</span></span><br><span class="line"><span class="comment">/// error occurred.</span></span><br><span class="line">+ (<span class="built_in">NSArray</span> *)modelsOfClass:(Class)modelClass fromJSONArray:(<span class="built_in">NSArray</span> *)JSONArray error:(<span class="built_in">NSError</span> **)error;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h4 id="2-注释要求简洁、明确、有意义。"><a href="#2-注释要求简洁、明确、有意义。" class="headerlink" title="2.注释要求简洁、明确、有意义。"></a>2.注释要求简洁、明确、有意义。</h4><p>既然是辅助表述，就不要啰嗦一顿还没说清楚，也不要喃喃自语。不需要注释的不要画蛇添足，强行注释；需要注释的，应以最简洁的语言将想要表达的意思表述清楚。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例如下面的注释，纯属多余。因为命名已经将意思表达的很清楚。</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIImageView</span> *avatarImageView;  <span class="comment">///&lt; 头像视图</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *userName;  <span class="comment">///&lt; 用户名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 播放视频 */</span></span><br><span class="line">- (<span class="keyword">void</span>)playVideo &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-在正确的位置注释"><a href="#3-在正确的位置注释" class="headerlink" title="3.在正确的位置注释"></a>3.在正确的位置注释</h4><p>一般在类的头文件中注释，在源文件中不需要再次注释。例如下面代码，为什么要注释两次？</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CodeReview</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *	更新用户信息</span></span><br><span class="line"><span class="comment"> * @param userModel 用户信息 model</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)updateUserInfoWithModel:(UserModel *)userModel;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CodeReview</span></span></span><br><span class="line"><span class="comment">/** 更新用户信息 */</span></span><br><span class="line">- (<span class="keyword">void</span>)updateUserInfoWithModel:(UserModel *)userModel &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>尽量不要在过程代码中添加注释。除非在过程中有一段不易于理解的代码，可以加注释阐述一下。尤其是有一段代码需要其他开发者注意，这时候可以<strong>加注释起到放大、警示作用</strong>。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面的方法中有两个问题，一是过程代码中太多的注释；二是方法中执行事件太多，一个方法原则上只执行一件事，后面会说到。</span></span><br><span class="line">- (<span class="keyword">void</span>)func &#123;</span><br><span class="line">	<span class="comment">// 暂停播放</span></span><br><span class="line">	[<span class="keyword">self</span>.player pause];</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 获取视频播放进度</span></span><br><span class="line">	<span class="built_in">CGFloat</span> totalTime = <span class="keyword">self</span>.player.currentItem.Duration.value /</span><br><span class="line">							 <span class="keyword">self</span>.player.currentItem.Duration.value.timescale;</span><br><span class="line">	<span class="built_in">CGFloat</span> currentTime = <span class="keyword">self</span>.player.currentTime.value /</span><br><span class="line">								<span class="keyword">self</span>.player.currentTime.timescale;</span><br><span class="line"> 	<span class="built_in">NSString</span> *playerProgress = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%.2f"</span>,currentTime / currentTime];</span><br><span class="line"> 	</span><br><span class="line"> 	<span class="comment">// 上传视频播放进度</span></span><br><span class="line"> 	NetWorkManager *manager = [NetWorkManager new];</span><br><span class="line"> 	[manager uploadViewProgress:playerProgress];</span><br><span class="line"> 	</span><br><span class="line"> 	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注释的样式因注释的内容不同，有着不同的格式。有些格式是能<strong>被 Xcode 识别的</strong>，有些格式是不能被识别的。在使用 Xcode 编写代码时，会有代码自动提示功能，同时如果一个如果这个变量或方法的注释被识别，则也会显示在代码提示栏中，例如下面的示例：</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Documentation</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *personalInfo;    <span class="comment">///&lt; 个人信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"Documentation.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    Documentation *documentation = [Documentation new];</span><br><span class="line">    documentation.pers</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/uploads/Clean-Code/document.png" alt="document"></p>
<p>swift 的注释与 OC 略有不同，有兴趣的可以看一下这篇<a href="http://nshipster.com/swift-documentation/" target="_blank" rel="noopener">文章</a>对于 OC ，常用的注释方式有一下几种：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>文件信息的注释，在创建文件时编译器会为我们生成，不可被识别</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  CodeReivew.h</span></span><br><span class="line"><span class="comment">//  BlogTest</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by boolChow on 17/2/18.</span></span><br><span class="line"><span class="comment">//  Copyright © 2016年 xxx All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line">2.头文件(.h)中方法的注释，Xcode8 快捷键 'option + command + /'，可以被识别。</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;#description#&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * param &lt;#param description#&gt;</span></span><br><span class="line"><span class="comment"> * return &lt;#return value description#&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="number">3.</span>源文件(.m)中私有方法的注释，可以和上面一样，也可以按照如下方式。</span><br><span class="line"><span class="comment">/** &lt;#descriotion#&gt; */</span>。</span><br><span class="line">- (<span class="keyword">void</span>)func &#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>属性的注释，常用两种</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *view; <span class="comment">///&lt; &lt;#description#&gt;</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIButton</span> *button; <span class="comment">//!&lt; &lt;#description#&gt;</span></span><br><span class="line"></span><br><span class="line">5.过程代码注释，一般使用 '// &lt;#description#&gt;'。</span><br><span class="line">6.枚举类型注释，一般使用 '/** &lt;#descriotion#&gt; */'。</span><br></pre></td></tr></table></figure>
<p>在 Xcode 中，<code>//</code> 这种注释是不能被识别的，能识别的一般有 <code>/** */</code>、<code>///</code>、<code>//!</code>、<code>///&lt;</code>、<code>//!&lt;</code>。另外，对于因为废弃而注释掉的代码，或者在调试过程中注释掉的代码，<strong>在进行代码提交之前一定要删掉！</strong></p>
<h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><p>排版格式是影响代码整洁度的一个重要因素，虽然现在大部分 IDE 都对代码进行了排版，但是还有一些地方是 IDE 不能做到的，这需要我们手动去排版。我下面将”从小-&gt;大”讲述一下格式的细节。</p>
<h4 id="1-大括号-‘-’"><a href="#1-大括号-‘-’" class="headerlink" title="1.大括号 ‘{}’"></a>1.大括号 ‘{}’</h4><p>对于大括号，有的习惯将在方法后面紧跟大括号的左半部分 ‘{‘，有的习惯换一行在写 ‘{‘，我习惯前者。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通方法</span></span><br><span class="line">- (<span class="keyword">void</span>)func &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if else 等类似语句，else 跟在 if 语句结束后面，而不是换行。如果 if 语句中只有一句代码，也建议加上大括号。</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">	...</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-空格"><a href="#2-空格" class="headerlink" title="2.空格"></a>2.空格</h4><p>在适当的地方使用空格，能够使代码显得更加清晰。</p>
<p>定义方法时，方法的 ‘-‘ 与方法返回值间添加空格，参数之间添加空格，方法名与方法开头的大括号之间添加空格<br><figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建议</span></span><br><span class="line">- (<span class="built_in">UIView</span> *)createBannerWithImage:(<span class="built_in">UIImage</span> *)image frame:(<span class="built_in">CGRect</span>)frame &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不建议</span></span><br><span class="line">-(<span class="built_in">UIView</span> *)createBannerWithImage : (<span class="built_in">UIImage</span> *)image frame:(<span class="built_in">CGRect</span>)frame&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>定义属性时，@property 与属性关键字之间空格，多个属性关键字之间使用空格，属性类型与属性名称之间使用空格，’*’紧跟属性名称。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建议</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *password;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不建议</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>,<span class="keyword">readonly</span>)<span class="built_in">NSString</span>*password;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> * password;</span><br></pre></td></tr></table></figure>
<p>运算符两侧之间添加空格。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建议</span></span><br><span class="line"><span class="keyword">if</span> (isOpen == <span class="literal">YES</span>) &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (username != <span class="literal">nil</span>) &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.backgroundColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line"><span class="keyword">self</span>.state = [value isEqualString:<span class="string">@""</span>] ? <span class="string">@"close"</span> : <span class="string">@"open"</span>;</span><br></pre></td></tr></table></figure>
<p>添加注释时，’//‘与内容之间添加空格，注释之间如果有英文单词，中英文之间添加空格。<br><figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建议</span></span><br><span class="line"><span class="comment">// 根据 URL 对内容进行预加载</span></span><br><span class="line">- (<span class="keyword">void</span>)prelaodDataWithURL:(<span class="built_in">NSString</span> *)url;</span><br></pre></td></tr></table></figure></p>
<h4 id="3-空行"><a href="#3-空行" class="headerlink" title="3.空行"></a>3.空行</h4><p>恰当是用空行能够使代码结构更加清晰，但是滥用空行会使代码显得更加糟糕。加空行的原则是：相关的代码组成一个”代码块”,两个代码块之间添加空行。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建议范例</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithUserModel:(UserModel *)userModel &#123;</span><br><span class="line">	<span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">		_userModel = userModel;</span><br><span class="line">		_imageArray = [<span class="built_in">NSArray</span> array];</span><br><span class="line">		_attribute = [<span class="built_in">NSDictionary</span> dictionary];</span><br><span class="line">		</span><br><span class="line">		[<span class="keyword">self</span> loadData];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不建议</span></span><br><span class="line">- （<span class="built_in">UIView</span> *)func &#123;</span><br><span class="line">	<span class="built_in">CGFloat</span> height = <span class="keyword">self</span>.avatarImageView.frame.size.height;</span><br><span class="line">	<span class="built_in">CGFloat</span> width = <span class="keyword">self</span>.avatarImageView.frame.size.width;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">UILabel</span> *descriptionLabel = [<span class="built_in">UILabel</span> new];</span><br><span class="line">	</span><br><span class="line">	descriptionLabel.frame = <span class="built_in">CGRectMake</span>(<span class="number">20.</span>f,<span class="number">30.</span>f,height,width);</span><br><span class="line">	</span><br><span class="line">	...</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> newView;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-模块分类"><a href="#4-模块分类" class="headerlink" title="4.模块分类"></a>4.模块分类</h4><p>对于头文件，可以分为系统 API、Pod文件、自定义 Model、自定义 View、自定义 Controller、自定义 Utils 等。具体分类依个人情况，只要合理即可。另外，个人习惯按照头文件长度从小到大排列。虽然现在有一些插件可以管理头文件，但是一开始就写清晰更好。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// System</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;CoreData/CoreData.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;CoreMedia/CoreMedia.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;AVFoundation/AVFoundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Pod</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Mantle/Mantle.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;YYImage/YYImage.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;CocoaLumberjack/DDLog.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;AFNetworking/AFNetworking.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Model</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"FeedModel.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"UserModel.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"CommentModel.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// View</span></span><br><span class="line"><span class="meta">#improt <span class="meta-string">"BannerView.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"PersonalInfoView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Controller</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"VideoDetailViewController.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"PersonalInfoViewController.h"</span></span></span><br></pre></td></tr></table></figure>
<p>对于属性分类，类似于头文件，例如按照 Data、View、Bool、Custom Class 等类型。依个人喜好，合理即可。</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Data</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> maxHeight;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *username;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *password;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSDictionary</span> *params;</span><br><span class="line"></span><br><span class="line"><span class="comment">// View</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *subView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *leftLine;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UITableView</span> *feedTableView;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Custom Class</span></span><br><span class="line">@Property (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) TimelineRequest *request;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) UserInfoManager *userInfoManager;</span><br></pre></td></tr></table></figure>
<p>一个类中，方法之间通过 ‘#pragma mark - xxx’ 进行模块划分。例如在一个 ViewController 中，按照 init Method、Setup Method、LifeCycle Method、Public Method、Private Method等。例如下面途中即按照模块进行分割。</p>
<p><img src="/uploads/Clean-Code/separateCodeBlock.png" alt="separateCodeBlock"></p>
<h4 id="5-一些原则"><a href="#5-一些原则" class="headerlink" title="5.一些原则"></a>5.一些原则</h4><p>对于代码的书写格式，需要遵循一些原则。类之间如何进行归类划分，属于设计模式的范畴，这里只从一个类说起。对于一个类文件，垂直方向代码长度最多建议 <strong>700~800 行</strong>(超过 500 行就有点不能忍了)，如果超过了 1000 行，则应进行拆分抽取，否则可阅读行会很差；水平方向，建议最多不要超过 <strong>80 个字符</strong>，如果超过，建议进行换行。例如下面注册 <code>Notification</code> 时：</p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不建议</span></span><br><span class="line">[[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(updateData) name:ZHIDidDeleteMediaNotification object:<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 建议</span></span><br><span class="line">[[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserver:<span class="keyword">self</span></span><br><span class="line">                                         selector:<span class="keyword">@selector</span>(updateData)</span><br><span class="line">                                             name:UpdateDataNotification</span><br><span class="line">                                           object:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>为了提高可阅读行，一个类中的方法，最好按照<strong>调用顺序</strong>进行编写，并进行模块分类。这样在其他人阅读代码时不用跳来跳去。</p>
<p>按照正常人的审美观，适当的缩进、空格、空行、对齐，可以提高代码整洁度与美感。按照正常人的逻辑思维，例如从小到大、由表及里、从短到长等一些逻辑顺序去划分模块，编写代码，可以提高代码可阅读性。按照正常人的单元理解能力，垂直方向编写适当范围行数代码，水平方向按照适当范围换行，也可以提高代码的可阅读行。</p>
<h3 id="方法与数据结构"><a href="#方法与数据结构" class="headerlink" title="方法与数据结构"></a>方法与数据结构</h3><h4 id="1-只做一件事"><a href="#1-只做一件事" class="headerlink" title="1.只做一件事"></a>1.只做一件事</h4><p>方法是对一段过程代码的封装，为了保证代码的整洁性，这段代码最好只执行一个事件，即一个方法最好只做一件事。先理解怎样才算是”一件事”，请看下面的代码：<br><figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">	[<span class="keyword">self</span> setupNotification];</span><br><span class="line">	[<span class="keyword">self</span> setupNavgationItme];</span><br><span class="line">	[<span class="keyword">self</span> setupTableView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setupTableView &#123;</span><br><span class="line">	<span class="keyword">self</span>.tableView = [[<span class="built_in">UITableView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">-64.0</span>f, MTScreenWidth, MTScreenHeight) style:<span class="built_in">UITableViewStylePlain</span>];</span><br><span class="line">  	<span class="keyword">self</span>.tableView.delegate = <span class="keyword">self</span>;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.dataSource = <span class="keyword">self</span>;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.tableFooterView = [<span class="built_in">UIView</span> new];</span><br><span class="line">  	<span class="keyword">self</span>.tableView.tableHeaderView = <span class="keyword">self</span>.tableHeaderView;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.separatorStyle = <span class="built_in">UITableViewCellSeparatorStyleNone</span>;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.backgroundColor = [<span class="built_in">UIColor</span> colorWithHexString:<span class="string">@"f2f2f2"</span>];</span><br><span class="line">  	[<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.tableView];</span><br><span class="line">    </span><br><span class="line">  	[<span class="keyword">self</span>.tableView registerClass:[CommonCell <span class="keyword">class</span>] forCellReuseIdentifier:kCommonCellReuseIdentifier];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面代码中，<code>viewDidLoad</code> 方法做了三个操作：注册通知、初始化导航栏、初始化 <code>tableView</code>，这是三件事还是一件事呢？写过 OC 代码的都知道，这些操作”均属于初始化一些基本信息的操作”，这三个操作都在<strong>同一个抽象层级</strong>上，因此算是一件事。</p>
<p>同样的 <code>setupTableView</code> 方法中，分别进行了：新建 <code>tableView</code> 对象，设定 <code>tableView</code> 代理、数据、<code>footerView</code> 等一系列信息，注册 <code>cell</code>。那么这算几件事呢？这些操作均属于初始化 <code>tableView</code>，因此这个方法也就只做了”初始化 <code>tableView</code>“这一件事。</p>
<p>刚才提到了”同一个抽象层级”，一个方法中应该只有一个抽象层级。如果混杂不同的抽象层级，会让人迷惑，方法看起来就像一个垃圾桶。例如下面的代码：<br><figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">	<span class="keyword">self</span>.dataURL = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@%@%@"</span>,host,baseURL,userID];</span><br><span class="line">	[<span class="keyword">self</span> setupView];</span><br><span class="line">	[<span class="keyword">self</span> setupNotification];</span><br><span class="line">	</span><br><span class="line">	[<span class="keyword">self</span> uploadData];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上述代码虽然只有几行，确混论不堪。拼接 <code>dataURL</code> 属于较低抽像层级；初始化视图和注册通知属于中间抽象层级；上传数据属于较高抽象层级。短短几行尚且能够读懂，多了之后读起来会乱七八糟。不建议这样写。</p>
<p>一个好的方法应该遵循这样的原则：在尽量<strong>短小</strong>的情况下，所有过程代码属于<strong>同一抽象层级</strong>，按照<strong>自顶向下</strong>的顺序书写代码。如果方法还能拆分，证明不合格。</p>
<h4 id="2-逻辑语句"><a href="#2-逻辑语句" class="headerlink" title="2.逻辑语句"></a>2.逻辑语句</h4><p>每种语言基本都会有 <code>if-else</code>、<code>for循环</code>、<code>switch</code> 等这些逻辑语句，过多的使用这些语句，会使代码变得冗长、丑陋。当你的一段代码嵌套2~3个 <code>if-else</code> 语句或者 <code>for循环</code>时，你就应该考虑一下是否有更优雅的写法呢。下面通过代码来分析一下：<br><figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给一个变量赋值需要这么多行代码吗？</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.isFriend) &#123;</span><br><span class="line">	<span class="keyword">self</span>.permission = <span class="string">@"YES"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="keyword">self</span>.permission = <span class="string">@"NO"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;objcArray.count; i++) &#123;</span><br><span class="line">	Object *obj = objcArray[i];</span><br><span class="line">	<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[obj description]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或许这种写法更简洁呢</span></span><br><span class="line"><span class="keyword">self</span>.permission = <span class="keyword">self</span>.isFriend ? <span class="string">@"YES"</span> : <span class="string">@"NO"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Object *obj <span class="keyword">in</span> objcArray) &#123;</span><br><span class="line">		<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[obj description]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if 判断中包含多个条件</span></span><br><span class="line"><span class="keyword">if</span> (name != <span class="literal">nil</span> &amp;&amp; password != <span class="literal">nil</span> &amp;&amp; phone != <span class="literal">nil</span> &amp;&amp; sex != <span class="literal">nil</span>) &#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这种情况最好封装成方法,if 判断中不要有太多的判断参数</span></span><br><span class="line"><span class="keyword">if</span> ([<span class="keyword">self</span> userInfoIsEmpty]) &#123;...&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)userInfoIsEmpty &#123;</span><br><span class="line">	<span class="keyword">return</span> name != <span class="literal">nil</span> &amp;&amp; password != <span class="literal">nil</span> &amp;&amp; phone != <span class="literal">nil</span> &amp;&amp; sex != <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这些语句是一些基本的语句，用起来简单，不用太走心，同时容易把代码写的冗长不堪。因此在写代码时要尽量减少这些语句的使用，用其他更加优雅的方式代替。</p>
<p>使用这些语句也暴露出一个问题，证明方法中有多处逻辑判断，每种条件下对应一个事件，是这个方法中包含太多的事件，极易违反”只做一件事”这一原则，也不易于阅读。</p>
<h4 id="3-参数"><a href="#3-参数" class="headerlink" title="3.参数"></a>3.参数</h4><p>一个方法，好情况下是没有参数，其次是一个、两个、三个（init 方法稍有特殊，可能会有多个参数）。当一个方法参数超过三个，那说明其中的一些参数可以封装为类了。</p>
<p>方法是对过程代码的封装，参数越多，暴露的内容就越多，封装性就越差。过多的参数，也不易于理解。</p>
<p>不建议向一个方法中传入布尔类型参数，否则的话就说明这个方法很有可能不只做一件事。YES 的时候会这样做，NO 的时候会那样做。</p>
<h4 id="4-结构化编程"><a href="#4-结构化编程" class="headerlink" title="4.结构化编程"></a>4.结构化编程</h4><p>每个方法，每个方法中的每个代码块都应该有一个入口、一个出口。遵循这个原则，意味着每个方法中只有一个 <code>return</code> 语句，循环中不能有 <code>break</code> 或 <code>continue</code> 语句，更不能有 <code>goto</code> 语句。结构化编程规范，对于小方法助易不大，只有在大的方法中，这些规范才会有明显的好处。所以，在保持方法短小的前提下，偶尔出现 <code>return</code>、<code>break</code>、<code>continue</code> 语句没有坏处，甚至比单入单出原则更有表达力。</p>
<h4 id="5-时序性耦合"><a href="#5-时序性耦合" class="headerlink" title="5.时序性耦合"></a>5.时序性耦合</h4><p>一个方法的过程代码中，有时会出现时序性耦合。例如下面代码：<br><figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">	[<span class="keyword">self</span> registerCell];</span><br><span class="line">	[<span class="keyword">self</span> registerNotification];</span><br><span class="line">	[<span class="keyword">self</span> setupData];</span><br><span class="line">	[<span class="keyword">self</span> setupTableView];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)registerCell &#123;</span><br><span class="line">	[<span class="keyword">self</span>.tableView registerClass:[EmptyTableViewCell <span class="keyword">class</span>] forCellReuseIdentifier:kEmptyCellReuseIdentifier];</span><br><span class="line"> 	[<span class="keyword">self</span>.TableView registerClass:[CommonCell <span class="keyword">class</span>] forCellReuseIdentifier:kCommonCellReuseIdentifier];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setupTableView &#123;</span><br><span class="line">	<span class="keyword">self</span>.tableView = [[<span class="built_in">UITableView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">-64.0</span>f, MTScreenWidth, MTScreenHeight) style:<span class="built_in">UITableViewStylePlain</span>];</span><br><span class="line">	<span class="keyword">self</span>.tableView.delegate = <span class="keyword">self</span>;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.dataSource = <span class="keyword">self</span>;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.tableFooterView = [<span class="built_in">UIView</span> new];</span><br><span class="line">  	<span class="keyword">self</span>.tableView.tableHeaderView = <span class="keyword">self</span>.tableHeaderView;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.separatorStyle = <span class="built_in">UITableViewCellSeparatorStyleNone</span>;</span><br><span class="line">  	[<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.tableView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上述代码中，在 <code>viewDidLoad</code> 方法中进行一些初始化操作。但是细心一些你会发现，”注册 <code>cell</code>“在”初始化 <code>tableView</code>“之前。但是在注册 <code>cell</code> 的时候会用到 <code>tableView</code>，这时候 <code>tableView</code> 还是 <code>nil</code>。所以这两个方法调用是有顺序的，否则就会出错。但是如果这样写，即使写对了，后面再修改代码时也容易颠倒位置，导致错误。那么最合适的做法应是这样：<br><figure class="highlight mm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将两个方法合并</span></span><br><span class="line">- (<span class="keyword">void</span>)setupTableView &#123;</span><br><span class="line">	<span class="keyword">self</span>.tableView = [[<span class="built_in">UITableView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">-64.0</span>f, MTScreenWidth, MTScreenHeight) style:<span class="built_in">UITableViewStylePlain</span>];</span><br><span class="line">	<span class="keyword">self</span>.tableView.delegate = <span class="keyword">self</span>;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.dataSource = <span class="keyword">self</span>;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.tableFooterView = [<span class="built_in">UIView</span> new];</span><br><span class="line">  	<span class="keyword">self</span>.tableView.tableHeaderView = <span class="keyword">self</span>.tableHeaderView;</span><br><span class="line">  	<span class="keyword">self</span>.tableView.separatorStyle = <span class="built_in">UITableViewCellSeparatorStyleNone</span>;</span><br><span class="line">  	[<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.tableView];</span><br><span class="line">  	</span><br><span class="line">  	[<span class="keyword">self</span>.tableView registerClass:[EmptyTableViewCell <span class="keyword">class</span>] forCellReuseIdentifier:kEmptyCellReuseIdentifier];</span><br><span class="line"> 	[<span class="keyword">self</span>.TableView registerClass:[CommonCell <span class="keyword">class</span>] forCellReuseIdentifier:kCommonCellReuseIdentifier];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="类与对象"><a href="#类与对象" class="headerlink" title="类与对象"></a>类与对象</h3><p>面向对象语言的特性就是抽象、封装、继承、多态，而”类”则将这些特性全部包含在内。所以一个好的类，便是将这些特性展现出来。</p>
<h4 id="1-类应该短小"><a href="#1-类应该短小" class="headerlink" title="1.类应该短小"></a>1.类应该短小</h4><p>在前面已经提过，一个类文件代码长度再好保持在 700~800 行以内。虽然一个类文件可能会有多个类与分类，但是具体到每个类，也应该保持短小，方便理解和阅读。</p>
<p>这里说的短小，并不单指代码行数方面的衡量。对于一个类，最主要的衡量方式是：<strong>权责</strong>。一个类不能有太多的权责，即使代码行数比较短，但是负责了太多事情，这个类仍然是一个臃肿的类。如果一个类有了太多权责，那么这个类就需要拆分，从而保持整洁性。这样会带了另外一个问题：类爆炸，似的项目中有太多短小单一的类。然而每达到一定规模的系统都会包括大量逻辑和复杂性，系统应该由许多短小的类而不是少量巨大的类组成。</p>
<h4 id="2-封装"><a href="#2-封装" class="headerlink" title="2.封装"></a>2.封装</h4><p>程序设计的原则是高内聚、低耦合。因此，一个类不应该暴露太多的属性（变量）与方法。下面是在使用 OC 进行程序设计时的一些建议。</p>
<p>对于头文件的引入，大多在 .m 文件中引入。如果 .h 文件中需要使用到其他的类，优先使用 <code>@class</code> 关键字引入，不能解决需求的情况下，再在 .h 文件中引入其他类的头文件。</p>
<p>对于属性，除了使用 <code>nonatomic/atomic</code>、<code>strong/weak/copy</code>关键字修饰之外，最好还要标明读写属性。如果一个属性可以是 <code>readonly</code>，就不要写成 <code>readwrite</code>，不要让其他的类随意修改本类的属性。</p>
<p>对于方法，尽量不要暴露太多的方法。一个类不要提供给外部太多乱七八糟的方法，以保证类的封装性。在提供方法时，方法的参数最好标明 <code>nonull/nullable</code> 属性，而且一个方法不要有太多参数。</p>
<h4 id="3-内聚"><a href="#3-内聚" class="headerlink" title="3.内聚"></a>3.内聚</h4><p>类应该只有少量的实体变量。类中的每个方法都应该操作一个或多个这种变量。通常而言，方法操作的变量越多，就越黏聚到类上。如果一个类中的每个变量都被每个方法所使用，则该类具有最大的内聚性。在 OC 中，如果一个属性在多个方法中被使用，是比较合理的；但是如果一个属性只在一个方法中使用，那么就有必要考虑一下这个属性的存在性，是否可以用局部变量代替。</p>
<h3 id="本书精华"><a href="#本书精华" class="headerlink" title="本书精华"></a>本书精华</h3><p>本书的第 14~16 章是对几个案例分析，第 17 张是一些总结性知识点，是本书的精华所在。如果用烹饪做比喻，那么前面的一些章节只是告诉你该用什么原料，油盐酱醋放的剂量以及火候；后面三章才是给你演示一遍整个烹饪过程，真正的授之以渔。</p>
<p>第 14 章《逐步改进》，是对一个自定义 <code>Args</code> 类的重构。通过逐步改进的方式，对原有类进行一步步分解。在这一过程中，遵循前面叙述的一些原则，对方法、变量进行大规模修改。其中有一点很值得学习，在进行重构之前，作者先写了一个覆盖这个类所有方法的单元测试。每次修改一些代码之后，都会跑一遍测试，如果测试通过，则继续修改；否则就需要找出问题，修复之后再继续。这非常值得我们学习，想象一下如果你不这样做，在重构完代码后，发现无法编译了，也不知道在哪个阶段修改出了问题，那会是多么糟糕的场景！</p>
<p>第 15 章《JUnit内幕》，是对 <code>JUnit</code> 框架部分代码的重构。同样，通过对代码的层层剖析，对代码的命名、函数的结构、模块的划分进行了一些改进，将前面讲的一些原则进行了推演。</p>
<p>第 16 章《重构SerialDate》，是对开源框架 <code>SerialDate</code> 的重构过程。先让代码跑通，然后从代码的注释开始，对代码进行修剪、结构调整。如书中所写，这一章分了两部分：”首先，让它工作”；”让它作对”。</p>
<p>第 17 章《味道与启发》，是一个总结性章节。对前面的一些规则，以及在重构过程中的一些启发的总结。如果你仔细阅读的前面的章节，尤其是第 14~16 章，这一章的内容你会充分的吸收。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>以上，是我对这本书做的一个总结。本书值得学习的地方远不止这些，如果能用一篇文章说清楚，作者干嘛还要写一本书。因此，如果你对代码的整洁性要求十分严苛，想成为一个更好的 coder，建议你读一读这本书。</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul>
<li><a href="https://book.douban.com/subject/5442024/" target="_blank" rel="noopener">代码整洁之道</a></li>
</ul>
<div align="center"><br><img src="/uploads/Reward.png" width="248" height="256"><br></div>

</div></article></div></main><footer><div class="paginator"><a href="/2017/10/04/iOS-Unit-Test/" class="prev">PREV</a><a href="/2017/02/26/Keywords-in-Objective-C/" class="next">NEXT</a></div><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
    id: 'Sun Feb 26 2017 19:41:39 GMT+0800',
    owner: 'boolchow',
    repo: 'boolchow.github.io',
    oauth: {
        client_id: '06247ad6645fcdc4c37c',
        client_secret: 'b3107efca11a366f4da8281d78bf59880f19a253',
    },
})
gitment.render('container')</script><div class="copyright"><p>版权声明：本文为博主原创文章,翻译文章,未经允许不可用于商业用途.</p><p>公众号：@bool周,不定期更新文章.</p><p>© 2015 - 2018 boolchow | powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>